-- MySQL dump 10.15  Distrib 10.0.21-MariaDB, for Linux (x86_64)
--
-- Host: localhost    Database: guichet_gru_rec
-- ------------------------------------------------------
-- Server version	10.0.21-MariaDB

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `sqlpage_fragment`
--

DROP TABLE IF EXISTS `sqlpage_fragment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sqlpage_fragment` (
  `id_sqlfragment` int(6) NOT NULL,
  `id_page` int(11) NOT NULL DEFAULT '0',
  `template` mediumtext COLLATE utf8_unicode_ci,
  `sql_query` mediumtext COLLATE utf8_unicode_ci,
  `pool` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `id_order` int(11) NOT NULL DEFAULT '0',
  `role` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id_sqlfragment`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sqlpage_fragment`
--

LOCK TABLES `sqlpage_fragment` WRITE;
/*!40000 ALTER TABLE `sqlpage_fragment` DISABLE KEYS */;
INSERT INTO `sqlpage_fragment` VALUES (1,1,'<div class=\"gru-wrapper\">\r\n <div id=\"customer-panel\" class=\"row bg-gru-light\">\r\n      <div class=\"col-xs-12 col-sm-offset-1 col-sm-11\">\r\n       <h2>Statistiques</h2>\r\n       <h3>Délai moyen de traitement total de la sollicitation</h3>\r\n     </div>\r\n  </div>\r\n  <div id=\"stats-panel\" class=\"row bg-gru-light\">\r\n     <div class=\"col-xs-12 col-sm-12\">\r\n         <div class=\"nav-tabs-custom\" style=\"margin-bottom:0;\">\r\n              <ul class=\"nav nav-tabs\"  style=\"padding: 15px 15px 0 15px\">\r\n                    <li role=\"presentation\" \" class=\"active\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=delaimoyendetraitementtotal\"  aria-controls=\"tab-active\" role=\"tab\">\r\n                       Délai moyen de traitement<br> total de la sollicitation\r\n                        </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombresollicitationsparnature\" aria-controls=\"group\" role=\"tab\">\r\n                       Nombre de sollicitations par nature\r\n                     </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationsparstatut\" aria-controls=\"domain\" role=\"tab\" >\r\n                       Nombre de sollicitations par statut \r\n                        </a>\r\n                    </li>\r\n                   <li class=\"dropdown\">\r\n                     <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" aria-expanded=\"false\">\r\n                       Nombre de sollicitations <br> par groupe d\'assignation <span class=\"caret\"></span>\r\n                       </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&amp;sqlpage=nombredesollicitationspargroupedassignationentity\">Groupe Assignation Entité</a>\r\n                            </li>\r\n                           <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationspargroupeassignation\">Groupe Assignation Support Entité</a>\r\n                           </li>\r\n                       </ul>\r\n                   </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=tauxdescalade\" aria-controls=\"domain\" role=\"tab\">\r\n                        Taux d\'escalade\r\n                      </a>\r\n                    </li>\r\n<li role=\"presentation\"><a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=canal\" aria-controls=\"domain\" role=\"tab\">\r\n                         Demandes par canal\r\n                        </a>\r\n                    </li>\r\n               </ul>\r\n               <div class=\"tab-content\">\r\n                 <div role=\"tabpanel\" class=\"tab-pane active\" id=\"tab-active\" >\r\n                        <div class=\"row\">\r\n                         <div class=\"col-xs-12 col-sm-12\">\r\n                             <#list rows as row>\r\n                                 <h2>Délais moyen de traitement des sollicitations</h2>\r\n                                 <p>Délai moyen de traitement total de la sollicitation: <strong>${row.cols[0]!} jours</strong>             \r\n                                </#list>','select avg(DATEDIFF(date_close, date_create)) as \"moyen\" FROM ticketing_ticket;','portal','Délai moyen de traitement total de la sollicitation',0,'none'),(2,1,'<#list rows as row>\r\n   <p>Délai moyen de traitement interne de la sollicitation: <strong>information indisponible dans la base de données (temps passé  en attente de retour usager)</strong></p>\r\n</#list>\r\n','select avg(DATEDIFF(date_close, date_create)) as \"moyen\" FROM ticketing_ticket','portal','Délai moyen de traitement interne de la sollicitation',1,'none'),(3,1,'<#list rows as row>\r\n<p>Délai moyen d’affectation: <strong>délai séparant la date d’affectation de la sollicitation de sa date de création dépend du workflow</strong></p>\r\n</#list>\r\n</div>\r\n                     </div>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n','select avg(DATEDIFF(date_close, date_create)) as \"moyen\" FROM ticketing_ticket;','portal','Délai moyen d’affectation',2,'none'),(4,4,'<div class=\"gru-wrapper\">\r\n   <div id=\"customer-panel\" class=\"row bg-gru-light\">\r\n      <div class=\"col-xs-12 col-sm-offset-1 col-sm-11\">\r\n       <h2>Statistiques</h2>\r\n       <h3>Nombre de sollicitations par groupe d\'assignation : Groupe Assignation Support </h3>\r\n     </div>\r\n  </div>\r\n  <div id=\"stats-panel\" class=\"row bg-gru-light\">\r\n     <div class=\"col-xs-12 col-sm-12\">\r\n         <div class=\"nav-tabs-custom\" style=\"margin-bottom:0;\">\r\n              <ul class=\"nav nav-tabs\"  style=\"padding: 15px 15px 0 15px\">\r\n                    <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=delaimoyendetraitementtotal\"  aria-controls=\"tab-active\" role=\"tab\">\r\n                       Délai moyen de traitement<br> total de la sollicitation\r\n                        </a>\r\n                    </li>\r\n                   <li role=\"presentation\" >\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombresollicitationsparnature\" aria-controls=\"group\" role=\"tab\">\r\n                       Nombre de sollicitations par nature\r\n                     </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationsparstatut\" aria-controls=\"domain\" role=\"tab\" >\r\n                       Nombre de sollicitations par statut \r\n                        </a>\r\n                    </li>\r\n                   <li class=\"dropdown active\">\r\n                      <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" aria-expanded=\"false\">\r\n                       Nombre de sollicitations <br>par groupe d\'assignation <span class=\"caret\"></span>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&amp;sqlpage=nombredesollicitationspargroupedassignationentity\">Groupe Assignation Entité</a>\r\n                            </li>\r\n                           <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationspargroupeassignation\">Groupe Assignation Entité Support </a>\r\n                          </li>\r\n                       </ul>\r\n                   </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=tauxdescalade\" aria-controls=\"domain\" role=\"tab\">\r\n                        Taux d\'escalade\r\n                      </a>\r\n                    </li>\r\n<li role=\"presentation\">\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=canal\" aria-controls=\"domain\" role=\"tab\">\r\n                        Demandes par canal\r\n                        </a>\r\n                    </li>\r\n               </ul>\r\n               <div class=\"tab-content\">\r\n                 <div role=\"tabpanel\" class=\"tab-pane active\" id=\"tab-active\" >\r\n                        <div class=\"row\">\r\n                         <div class=\"col-xs-12 col-sm-6 table-responsive\">\r\n                             <table class=\"table table-striped\">\r\n                                   <thead>\r\n                                     <tr>\r\n                                            <th>Groupe</th>\r\n                                         <th></th>\r\n                                           <th> \r\n                                           <div class=\"btn-group\">\r\n                                               <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"fa fa-save\" ></i> Exporter\r\n                                                   <span class=\"fa fa-caret-down\"></span>\r\n                                                </button>\r\n                                               <ul class=\"dropdown-menu\">\r\n                                                    <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=pdf&report_id=entitysupportpdf\" > Exporter en pdf</a></li>\r\n                                                  <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=xls&report_id=entitysupportxls\" > Exporter en xls</a></li>\r\n                                              </ul>\r\n                                           </div>\r\n                                          </th>\r\n                                       </tr>\r\n                                   </thead>\r\n                                    <tbody>\r\n                                     <#list rows as row>\r\n                                     <tr>\r\n                                            <td>${row.cols[0]}</td>\r\n                                         <td colspan=\"2\">${row.cols[1]}</td>\r\n                                       </tr>\r\n                                       \r\n                                        </#list>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                          <div class=\"col-xs-12 col-sm-4\">\r\n                              <div id=\"canvas-holder\">\r\n                                  <div id=\"canvas\" ></div>\r\n                              </div>\r\n                          </div>\r\n                          <div class=\"col-xs-12 col-sm-2\">\r\n                              <div class=\"btn-group-vertical\">\r\n                                  <a href=\'javascript:doughnut( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Doughnut</a>\r\n                                   <a href=\'javascript:pie( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Pie </a>\r\n                                    <a href=\'javascript:bar( )\' class=\"btn btn-default\"> <i class=\"fa fa-bar-chart\" ></i> Bar</a>\r\n                             </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n  \r\n        </div>\r\n  </div>\r\n  </div>\r\n<script src=\"js/Chart.min.js\"></script> \r\n<#assign colors = [\"#F7464A\",\"#46BFBD\",\"#FDB45C\", \"#949FB1\",\"#4D5360\" ] />\r\n<#assign highlights = [\"#FF5A5E\",\"#5AD3D1\",\"#FFC870\", \"#A8B3C5\",\"#616774\" ] />\r\n<script>\r\nvar doughnutData = [\r\n<#list rows as row>\r\n    <#if row_index != 0> , </#if>                \r\n    {\r\n   value: ${row.cols[1]},\r\n  color:\"${colors[row_index % 5]}\",\r\n highlight: \"${highlights[row_index % 5]}\",\r\n    label: \"${row.cols[0]}\"\r\n    }\r\n</#list>\r\n];\r\nvar barChartData = {\r\n        labels : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[0]}\"</#list> ],\r\n       datasets : [\r\n            {\r\n               fillColor : \"rgba(100,100,220,0.8)\",\r\n              strokeColor : \"rgba(100,100,220,0.9)\",\r\n                highlightFill: \"rgba(100,100,220,0.9)\",\r\n               highlightStroke: \"rgba(100,100,220,1)\",\r\n               data : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[1]}\"</#list>]\r\n           }       ]\r\n\r\n};\r\n\r\nwindow.onload = function(){\r\n    doughnut();\r\n};\r\n\r\nfunction doughnut( ) {\r\n        $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n  var ctx2 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.myDoughnut = new Chart(ctx2).Doughnut(doughnutData, {responsive : true});\r\n         \r\n};\r\n\r\nfunction pie( ) {\r\n         $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n        document.getElementById(\"chart-area\").getContext(\"2d\").clearRect(0, 0, 400, 400);\r\n var ctx1 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.Pie = new Chart(ctx1).Pie(doughnutData, {responsive : true});\r\n        \r\n};\r\nfunction bar( ) {\r\n                $( \"#chart-area\" ).remove(  );\r\n                $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n     var ctx3 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n      window.myBar = new Chart(ctx3).Bar(barChartData, {\r\n          responsive : true, animationSteps: 50\r\n            });\r\n};\r\n</script>','select us.name, count(distinct t.id_ticket) from unittree_unit u JOIN ticketing_ticket t ON (u.id_unit = t.id_unit) JOIN ticketing_support_entity us ON us.id_unit = u.id_unit  group by (us.name) ;','portal','Nombre de sollicitations par groupe d’assignation (Entité de Support)',0,'none'),(5,3,'<div class=\"gru-wrapper\">\r\n <div id=\"customer-panel\" class=\"row bg-gru-light\">\r\n      <div class=\"col-xs-12 col-sm-offset-1 col-sm-11\">\r\n       <h2>Statistiques</h2>\r\n       <h3>Nombre de sollicitations par statut</h3>\r\n      </div>\r\n  </div>\r\n  <div id=\"stats-panel\" class=\"row bg-gru-light\">\r\n     <div class=\"col-xs-12 col-sm-12\">\r\n         <div class=\"nav-tabs-custom\" style=\"margin-bottom:0;\">\r\n              <ul class=\"nav nav-tabs\"  style=\"padding: 15px 15px 0 15px\">\r\n                    <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=delaimoyendetraitementtotal\" role=\"tab\">\r\n                     Délai moyen de <br>traitement total de la sollicitation\r\n                        </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombresollicitationsparnature\" role=\"tab\">\r\n                       Nombre de sollicitations par nature\r\n                     </a>\r\n                    </li>\r\n                   <li role=\"presentation\"  class=\"active\">\r\n                        <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationsparstatut\" role=\"tab\" >\r\n                        Nombre de sollicitations par statut \r\n                        </a>\r\n                    </li>\r\n                   <li class=\"dropdown\">\r\n                     <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" aria-expanded=\"false\">\r\n                       Nombre de sollicitations <br>par groupe d\'assignation <span class=\"caret\"></span>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&amp;sqlpage=nombredesollicitationspargroupedassignationentity\">Groupe Assignation Entité</a>\r\n                            </li>\r\n                           <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationspargroupeassignation\">Groupe Assignation Support Entité</a>\r\n                           </li>\r\n                       </ul>\r\n                   </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=tauxdescalade\" role=\"tab\">\r\n                         Taux d\'escalade\r\n                      </a>\r\n                    </li>\r\n<li role=\"presentation\">\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=canal\" aria-controls=\"domain\" role=\"tab\">\r\n                        Demandes par canal\r\n                        </a>\r\n                    </li>\r\n               </ul>\r\n               <div class=\"tab-content\">\r\n                 <div role=\"tabpanel\" class=\"tab-pane active\" id=\"tab-active\" >\r\n                        <div class=\"row\">\r\n                         <div class=\"col-xs-12 col-sm-6\">\r\n                              <table class=\"table table-striped\">\r\n                                   <thead>\r\n                                     <tr>\r\n                                            <th>Statut</th>\r\n                                         <th>Nombre de sollicitations</th>\r\n                                           <th> \r\n                                           <div class=\"btn-group\">\r\n                                               <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"fa fa-save\" ></i> Exporter\r\n                                                   <span class=\"fa fa-caret-down\"></span>\r\n                                                </button>\r\n                                               <ul class=\"dropdown-menu\">\r\n                                                    <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=pdf&report_id=statuspdf\" > Exporter en pdf</a></li>\r\n                                                 <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=xls&report_id=statusxls\" > Exporter en xls</a></li>\r\n                                             </ul>\r\n                                           </div>\r\n                                          </th>\r\n                                       </tr>\r\n                                   </thead>\r\n                                    <tbody>\r\n                                     <#list rows as row>\r\n                                                                                      <#assign status= \"ouvert\" >\r\n                                                                                 <#if row.cols[0]  == \"1\" >\r\n                                                                                      <#assign status= \"fermé\" >\r\n                                                                                 </#if>\r\n                                       <tr>\r\n                                            <td>${status}</td>\r\n                                          <td colspan=\"2\">${row.cols[1]}</td>\r\n                                       </tr>\r\n                                       \r\n                                        </#list>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                          <div class=\"col-xs-12 col-sm-4\">\r\n                              <div id=\"canvas-holder\">\r\n                                  <div id=\"canvas\" ></div>\r\n                              </div>\r\n                          </div>\r\n                          <div class=\"col-xs-12 col-sm-2\">\r\n                              <div class=\"btn-group-vertical\">\r\n                                  <a href=\'javascript:doughnut( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Doughnut</a>\r\n                                   <a href=\'javascript:pie( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Pie </a>\r\n                                    <a href=\'javascript:bar( )\' class=\"btn btn-default\"> <i class=\"fa fa-bar-chart\" ></i> Bar</a>\r\n                             </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n<script src=\"js/Chart.min.js\"></script>   \r\n<#assign colors = [\"#F7464A\",\"#46BFBD\",\"#FDB45C\", \"#949FB1\",\"#4D5360\" ] />\r\n<#assign highlights = [\"#FF5A5E\",\"#5AD3D1\",\"#FFC870\", \"#A8B3C5\",\"#616774\" ] />\r\n<script>\r\nvar doughnutData = [\r\n<#list rows as row>\r\n    <#if row_index != 0> , </#if>                \r\n    {\r\n   value: ${row.cols[1]},\r\n  color:\"${colors[row_index % 5]}\",\r\n highlight: \"${highlights[row_index % 5]}\",\r\n    label: \"${row.cols[0]}\"\r\n    }\r\n</#list>\r\n];\r\nvar barChartData = {\r\n        labels : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[0]}\"</#list> ],\r\n       datasets : [\r\n            {\r\n               fillColor : \"rgba(100,100,220,0.8)\",\r\n              strokeColor : \"rgba(100,100,220,0.9)\",\r\n                highlightFill: \"rgba(100,100,220,0.9)\",\r\n               highlightStroke: \"rgba(100,100,220,1)\",\r\n               data : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[1]}\"</#list>]\r\n           }       ]\r\n\r\n};\r\n\r\nwindow.onload = function(){\r\n    doughnut();\r\n};\r\n\r\nfunction doughnut( ) {\r\n        $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n  var ctx2 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.myDoughnut = new Chart(ctx2).Doughnut(doughnutData, {responsive : true});\r\n         \r\n};\r\n\r\nfunction pie( ) {\r\n         $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n        document.getElementById(\"chart-area\").getContext(\"2d\").clearRect(0, 0, 400, 400);\r\n var ctx1 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.Pie = new Chart(ctx1).Pie(doughnutData, {responsive : true});\r\n        \r\n};\r\nfunction bar( ) {\r\n                $( \"#chart-area\" ).remove(  );\r\n                $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n     var ctx3 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n      window.myBar = new Chart(ctx3).Bar(barChartData, {\r\n          responsive : true, animationSteps: 50\r\n            });\r\n};\r\n</script>','select ticket_status, count(distinct id_ticket) from ticketing_ticket group by (ticket_status);','portal','Nombre de sollicitations par statut',0,'none'),(8,5,'<div class=\"row\">\r\n<div class=\"col-xs-12 col-md-6\">\r\n<script src=\"js/Chart.min.js\"></script>\r\n<h2>Nombre de sollicitations par groupe d’assignation (Entity de Support)</h2>\r\n<div class=\"row\">\r\n<div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n<table class=\"table table-condensed table-striped\">\r\n    <thead>\r\n    <tr>\r\n        <th>Entity Support</th>\r\n         <th>Date de création</th>\r\n        <th>Nombre de sollicitations</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n       <#list rows as row>\r\n     <tr>\r\n            <td>${row.cols[0]}</td>\r\n         <td>${row.cols[1]}</td>\r\n                        <td>${row.cols[2]}</td>\r\n      </tr>\r\n       \r\n        </#list>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n<div class=\"row\">\r\n<div class=col-xs-9 col-sm-9 col-md-9 col-lg-9\">\r\n<h2> Graphique</h2>\r\n       <div >\r\n          <canvas id=\"canvasEntity\" height=\"400\" width=\"600\"></canvas>\r\n      </div>\r\n        </div>\r\n</div>\r\n\r\n  <script>\r\n    var barChartData2 = {\r\n       labels : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[0]}\"</#list> ],\r\n       datasets : [\r\n            {\r\n               fillColor : \"rgba(100,100,220,0.8)\",\r\n              strokeColor : \"rgba(100,100,220,0.9)\",\r\n                highlightFill: \"rgba(100,100,220,0.9)\",\r\n               highlightStroke: \"rgba(100,100,220,1)\",\r\n               data : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[2]}\"</#list>]\r\n           }       ]\r\n\r\n   }\r\n   window.onload = function(){\r\n     var context = document.getElementById(\"canvasEntity\").getContext(\"2d\");\r\n     window.myBa = new Chart(context).Bar(barChartData2, {\r\n           responsive : true, animationSteps: 50\r\n       });\r\n }\r\n\r\n   </script>\r\n</row>\r\n</div>\r\n</div>','select us.name, date_create ,count(distinct t.id_ticket) from unittree_unit u JOIN ticketing_ticket t ON (u.id_unit = t.id_unit) JOIN ticketing_support_entity us ON us.id_unit = u.id_unit  where (t.date_create >  \'@param1@\' ) group by (us.name) ;','portal','Test Demo',2,'none'),(10,6,'<#list rows as row>\r\n                <#if !nbSollicitationEscl??>\r\n           <#assign nbSollicitationEscl = row.cols[0]?number >\r\n                <#else>\r\n                    <#assign nbSollicitationTotal= row.cols[0]?number >\r\n                </#if>\r\n</#list>\r\n\r\n<#if nbSollicitationTotal == 0>\r\n  <#assign nbSollicitationTotal= 1 >\r\n  <#assign nbSollicitationEscl = 1>\r\n</#if>\r\n<#assign taux= (nbSollicitationEscl / nbSollicitationTotal) * 100 >\r\n<tr>\r\n<td>Taux d’escalade:</td>\r\n<td colspan=\"2\"> <strong>${taux}  %</strong>\r\n</td>\r\n<tr>\r\n</tbody>\r\n                                </table>\r\n                            </div>\r\n                          <div class=\"col-xs-12 col-sm-4\">\r\n                              <div id=\"canvas-holder\">\r\n                                  <div id=\"canvas\" ></div>\r\n                              </div>\r\n                          </div>\r\n                          <div class=\"col-xs-12 col-sm-2\">\r\n                              <div class=\"btn-group-vertical\">\r\n                                  <a href=\'javascript:doughnut( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Doughnut</a>\r\n                                   <a href=\'javascript:pie( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Pie </a>\r\n                                    <a href=\'javascript:bar( )\' class=\"btn btn-default\"> <i class=\"fa fa-bar-chart\" ></i> Bar</a>\r\n                             </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n<script src=\"js/Chart.min.js\"></script>   \r\n<#assign colors = [\"#F7464A\",\"#46BFBD\",\"#FDB45C\", \"#949FB1\",\"#4D5360\" ] />\r\n<#assign highlights = [\"#FF5A5E\",\"#5AD3D1\",\"#FFC870\", \"#A8B3C5\",\"#616774\" ] />\r\n<script>\r\nvar doughnutData = [        \r\n    {\r\n   value:${nbSollicitationEscl},\r\n   color:\"${colors[0 % 5]}\",\r\n highlight: \"${highlights[0 % 5]}\",\r\n    label: \"Sollicitations Escaladées\"\r\n    },\r\n   {\r\n value: ${nbSollicitationTotal - nbSollicitationEscl},\r\n   color:\"${colors[1 % 5]}\",\r\n highlight: \"${highlights[1 % 5]}\",\r\n    label: \"Sollicitation non Escaladées\"\r\n    }\r\n];\r\n\r\n\r\nvar barChartData = {\r\n     labels : [\"Sollicitation Escaladées\", \"Sollicitation non Escaladées\"  ],\r\n      datasets : [\r\n            {\r\n               fillColor : \"rgba(100,100,220,0.8)\",\r\n              strokeColor : \"rgba(100,100,220,0.9)\",\r\n                highlightFill: \"rgba(100,100,220,0.9)\",\r\n               highlightStroke: \"rgba(100,100,220,1)\",\r\n               data : [${nbSollicitationEscl}, ${nbSollicitationTotal - nbSollicitationEscl} ]\r\n         }       ]\r\n\r\n};\r\n\r\nwindow.onload = function(){\r\n    doughnut();\r\n};\r\n\r\nfunction doughnut( ) {\r\n        $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n  var ctx2 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.myDoughnut = new Chart(ctx2).Doughnut(doughnutData, {responsive : true});\r\n         \r\n};\r\n\r\nfunction pie( ) {\r\n         $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n        document.getElementById(\"chart-area\").getContext(\"2d\").clearRect(0, 0, 400, 400);\r\n var ctx1 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.Pie = new Chart(ctx1).Pie(doughnutData, {responsive : true});\r\n        \r\n};\r\nfunction bar( ) {\r\n                $( \"#chart-area\" ).remove(  );\r\n                $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n     var ctx3 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n      window.myBar = new Chart(ctx3).Bar(barChartData, {\r\n          responsive : true, animationSteps: 50\r\n            });\r\n};\r\n\r\n</script>\r\n','select count(distinct wh.id_resource) from workflow_resource_history wh JOIN workflow_task wt ON (wt.id_action = wh.id_action AND wt.id_task = 381)  UNION ALL select count(distinct id_ticket ) from ticketing_ticket ;','portal','Taux d’escalade',3,'none'),(11,6,'<div class=\"gru-wrapper\">\r\n   <div id=\"customer-panel\" class=\"row bg-gru-light\">\r\n      <div class=\"col-xs-12 col-sm-offset-1 col-sm-11\">\r\n       <h2>Statistiques</h2>\r\n       <h3>Taux d\'escalade</h3>\r\n     </div>\r\n  </div>\r\n  <div id=\"stats-panel\" class=\"row bg-gru-light\">\r\n     <div class=\"col-xs-12 col-sm-12\">\r\n         <div class=\"nav-tabs-custom\" style=\"margin-bottom:0;\">\r\n              <ul class=\"nav nav-tabs\"  style=\"padding: 15px 15px 0 15px\">\r\n                    <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=delaimoyendetraitementtotal\"  aria-controls=\"tab-active\" role=\"tab\">\r\n                       Délai moyen de traitement<br> total de la sollicitation\r\n                        </a>\r\n                    </li>\r\n                   <li role=\"presentation\" >\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombresollicitationsparnature\" aria-controls=\"group\" role=\"tab\">\r\n                       Nombre de sollicitations par nature\r\n                     </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationsparstatut\" aria-controls=\"domain\" role=\"tab\" >\r\n                       Nombre de sollicitations par statut \r\n                        </a>\r\n                    </li>\r\n                   <li class=\"dropdown\">\r\n                     <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" aria-expanded=\"false\">\r\n                       Nombre de sollicitations<br> par groupe d\'assignation <span class=\"caret\"></span>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&amp;sqlpage=nombredesollicitationspargroupedassignationentity\">Groupe Assignation Entité</a>\r\n                            </li>\r\n                           <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationspargroupeassignation\">Groupe Assignation Entité Support </a>\r\n                          </li>\r\n                       </ul>\r\n                   </li>\r\n                   <li role=\"presentation\" class=\"active\">\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=tauxdescalade\" aria-controls=\"domain\" role=\"tab\">\r\n                        Taux d\'escalade\r\n                      </a>\r\n                    </li>\r\n<li role=\"presentation\">\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=canal\" aria-controls=\"domain\" role=\"tab\">\r\n                        Demandes par canal\r\n                        </a>\r\n                    </li>\r\n               </ul>\r\n               <div class=\"tab-content\">\r\n                 <div role=\"tabpanel\" class=\"tab-pane active\" id=\"tab-active\" >\r\n                        <div class=\"row\">\r\n                         <div class=\"col-xs-12 col-sm-6 table-responsive\">\r\n                             <table class=\"table table-striped\">\r\n                                   <thead>\r\n                                     <tr>\r\n                                            <th>Titre</th>\r\n                                          <th></th>\r\n                                           <th> \r\n                                           <div class=\"btn-group\">\r\n                                               <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"fa fa-save\" ></i> Exporter\r\n                                                   <span class=\"fa fa-caret-down\"></span>\r\n                                                </button>\r\n                                               <ul class=\"dropdown-menu\">\r\n                                                    <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=pdf&report_id=escaladepdf\" > Exporter en pdf</a></li>\r\n                                                   <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=xls&report_id=escaladexls\" > Exporter en xls</a></li>\r\n                                               </ul>\r\n                                           </div>\r\n                                          </th>\r\n                                       </tr>\r\n                                   </thead>\r\n                                    <tbody>\r\n<#list rows as row>\r\n      <tr>\r\n                         <td> Nombre de sollicitations escaladées:  </td>\r\n<td colspan=\"2\"> <strong> ${row.cols[0]!} sollicitations</strong></td>\r\n</tr>\r\n</#list>\r\n','select count(distinct wh.id_resource) from workflow_resource_history wh JOIN workflow_task wt ON (wt.id_action = wh.id_action AND wt.id_task = 381);','portal','Nombre de sollicitations escaladées',1,'none'),(12,6,'<#list rows as row>\r\n<tr>\r\n<td>Nombre total de sollicitations </td>\r\n<td colspan=\"2\"><strong> ${row.cols[0]!} sollicitations</strong></td>\r\n</tr>\r\n</#list>\r\n','select count(distinct t.id_ticket) from ticketing_ticket t;','portal','Nombre total de sollicitations',2,'none'),(14,8,'<div class=\"gru-wrapper\">\r\n  <div id=\"customer-panel\" class=\"row bg-gru-light\">\r\n      <div class=\"col-xs-12 col-sm-offset-1 col-sm-11\">\r\n       <h2>Statistiques</h2>\r\n       <h3>Nombre de sollicitations par groupe d\'assignation : Groupe Assignation Entité </h3>\r\n     </div>\r\n  </div>\r\n  <div id=\"stats-panel\" class=\"row bg-gru-light\">\r\n     <div class=\"col-xs-12 col-sm-12\">\r\n         <div class=\"nav-tabs-custom\" style=\"margin-bottom:0;\">\r\n              <ul class=\"nav nav-tabs\"  style=\"padding: 15px 15px 0 15px\">\r\n                    <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=delaimoyendetraitementtotal\"  aria-controls=\"tab-active\" role=\"tab\">\r\n                       Délai moyen de traitement<br> total de la sollicitation\r\n                        </a>\r\n                    </li>\r\n                   <li role=\"presentation\" >\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombresollicitationsparnature\" aria-controls=\"group\" role=\"tab\">\r\n                       Nombre de sollicitations par nature\r\n                     </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationsparstatut\" aria-controls=\"domain\" role=\"tab\" >\r\n                       Nombre de sollicitations par statut \r\n                        </a>\r\n                    </li>\r\n                   <li class=\"dropdown active\">\r\n                      <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" aria-expanded=\"false\">\r\n                       Nombre de sollicitations <br>par groupe d\'assignation <span class=\"caret\"></span>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&amp;sqlpage=nombredesollicitationspargroupedassignationentity\">Groupe Assignation Entité</a>\r\n                            </li>\r\n                           <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationspargroupeassignation\">Groupe Assignation Entité Support </a>\r\n                          </li>\r\n                       </ul>\r\n                   </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=tauxdescalade\" aria-controls=\"domain\" role=\"tab\">\r\n                        Taux d\'escalade\r\n                      </a>\r\n                    </li>\r\n<li role=\"presentation\">\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=canal\" aria-controls=\"domain\" role=\"tab\">\r\n                        Demandes par canal\r\n                        </a>\r\n                    </li>\r\n               </ul>\r\n               <div class=\"tab-content\">\r\n                 <div role=\"tabpanel\" class=\"tab-pane active\" id=\"tab-active\" >\r\n                        <div class=\"row\">\r\n                         <div class=\"col-xs-12 col-sm-6 table-responsive\">\r\n                             <table class=\"table table-striped\">\r\n                                   <thead>\r\n                                     <tr>\r\n                                            <th>Groupe</th>\r\n                                         <th></th>\r\n                                           <th> \r\n                                           <div class=\"btn-group\">\r\n                                               <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"fa fa-save\" ></i> Exporter\r\n                                                   <span class=\"fa fa-caret-down\"></span>\r\n                                                </button>\r\n                                               <ul class=\"dropdown-menu\">\r\n                                                    <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=pdf&report_id=entitygroupepdf\" > Exporter en pdf</a></li>\r\n                                                   <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=xls&report_id=entitygroupexls\" > Exporter en xls</a></li>\r\n                                               </ul>\r\n                                           </div>\r\n                                          </th>\r\n                                       </tr>\r\n                                   </thead>\r\n                                    <tbody>\r\n                                     <#list rows as row>\r\n                                     <tr>\r\n                                            <td>${row.cols[0]}</td>\r\n                                         <td colspan=\"2\">${row.cols[1]}</td>\r\n                                       </tr>\r\n                                       \r\n                                        </#list>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                          <div class=\"col-xs-12 col-sm-4\">\r\n                              <div id=\"canvas-holder\">\r\n                                  <div id=\"canvas\" ></div>\r\n                              </div>\r\n                          </div>\r\n                          <div class=\"col-xs-12 col-sm-2\">\r\n                              <div class=\"btn-group-vertical\">\r\n                                  <a href=\'javascript:doughnut( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Doughnut</a>\r\n                                   <a href=\'javascript:pie( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Pie </a>\r\n                                    <a href=\'javascript:bar( )\' class=\"btn btn-default\"> <i class=\"fa fa-bar-chart\" ></i> Bar</a>\r\n                             </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n  \r\n        </div>\r\n  </div>\r\n  </div>\r\n<script src=\"js/Chart.min.js\"></script> \r\n<#assign colors = [\"#F7464A\",\"#46BFBD\",\"#FDB45C\", \"#949FB1\",\"#4D5360\" ] />\r\n<#assign highlights = [\"#FF5A5E\",\"#5AD3D1\",\"#FFC870\", \"#A8B3C5\",\"#616774\" ] />\r\n<script>\r\nvar doughnutData = [\r\n<#list rows as row>\r\n    <#if row_index != 0> , </#if>                \r\n    {\r\n   value: ${row.cols[1]},\r\n  color:\"${colors[row_index % 5]}\",\r\n highlight: \"${highlights[row_index % 5]}\",\r\n    label: \"${row.cols[0]}\"\r\n    }\r\n</#list>\r\n];\r\nvar barChartData = {\r\n        labels : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[0]}\"</#list> ],\r\n       datasets : [\r\n            {\r\n               fillColor : \"rgba(100,100,220,0.8)\",\r\n              strokeColor : \"rgba(100,100,220,0.9)\",\r\n                highlightFill: \"rgba(100,100,220,0.9)\",\r\n               highlightStroke: \"rgba(100,100,220,1)\",\r\n               data : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[1]}\"</#list>]\r\n           }       ]\r\n\r\n};\r\n\r\nwindow.onload = function(){\r\n    doughnut();\r\n};\r\n\r\nfunction doughnut( ) {\r\n        $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n  var ctx2 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.myDoughnut = new Chart(ctx2).Doughnut(doughnutData, {responsive : true});\r\n         \r\n};\r\n\r\nfunction pie( ) {\r\n         $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n        document.getElementById(\"chart-area\").getContext(\"2d\").clearRect(0, 0, 400, 400);\r\n var ctx1 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.Pie = new Chart(ctx1).Pie(doughnutData, {responsive : true});\r\n        \r\n};\r\nfunction bar( ) {\r\n                $( \"#chart-area\" ).remove(  );\r\n                $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n     var ctx3 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n      window.myBar = new Chart(ctx3).Bar(barChartData, {\r\n          responsive : true, animationSteps: 50\r\n            });\r\n};\r\n</script>','select u.label, count(t.id_unit) from unittree_unit u JOIN ticketing_ticket t ON u.id_unit = t.id_unit group by (u.label);','portal','Nombre de sollicitations par groupe d’assignation (Entité)',1,'none'),(16,2,'<div class=\"gru-wrapper\">\r\n <div id=\"customer-panel\" class=\"row bg-gru-light\">\r\n      <div class=\"col-xs-12 col-sm-offset-1 col-sm-11\">\r\n       <h2>Statistiques</h2>\r\n       <h3>Nombre de sollicitations par nature</h3>\r\n      </div>\r\n  </div>\r\n  <div id=\"stats-panel\" class=\"row bg-gru-light\">\r\n     <div class=\"col-xs-12 col-sm-12\">\r\n         <div class=\"nav-tabs-custom\" style=\"margin-bottom:0;\">\r\n              <ul class=\"nav nav-tabs\"  style=\"padding: 15px 15px 0 15px\">\r\n                    <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=delaimoyendetraitementtotal\"  aria-controls=\"tab-active\" role=\"tab\">\r\n                       Délai moyen de traitement<br> total de la sollicitation\r\n                        </a>\r\n                    </li>\r\n                   <li role=\"presentation\" class=\"active\">\r\n                     <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombresollicitationsparnature\" aria-controls=\"group\" role=\"tab\">\r\n                       Nombre de sollicitations par nature\r\n                     </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationsparstatut\" aria-controls=\"domain\" role=\"tab\" >\r\n                       Nombre de sollicitations par statut \r\n                        </a>\r\n                    </li>\r\n                   <li class=\"dropdown\">\r\n                     <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" aria-expanded=\"false\">\r\n                       Nombre de sollicitations <br> par groupe d\'assignation <span class=\"caret\"></span>\r\n                       </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&amp;sqlpage=nombredesollicitationspargroupedassignationentity\">Groupe Assignation Entité</a>\r\n                            </li>\r\n                           <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationspargroupeassignation\">Groupe Assignation Support Entité</a>\r\n                           </li>\r\n                       </ul>\r\n                   </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=tauxdescalade\" aria-controls=\"domain\" role=\"tab\">\r\n                        Taux d\'escalade\r\n                      </a>\r\n                    </li>\r\n<li role=\"presentation\">\r\n                 <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=canal\" aria-controls=\"domain\" role=\"tab\">\r\n                        Demandes par canal\r\n                    </a>\r\n                    </li>\r\n               </ul>\r\n               <div class=\"tab-content\">\r\n                 <div role=\"tabpanel\" class=\"tab-pane active\" id=\"tab-active\" >\r\n                        <div class=\"row\">\r\n                         <div class=\"col-xs-12 col-sm-6\">\r\n                              <table class=\"table table-striped\">\r\n                                   <thead>\r\n                                     <tr>\r\n                                            <th>Nature</th>\r\n                                         <th>Nombre de sollicitations</th>\r\n                                           <th> \r\n                                           <div class=\"btn-group\">\r\n                                               <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"fa fa-save\" ></i> Exporter\r\n                                                   <span class=\"fa fa-caret-down\"></span>\r\n                                                </button>\r\n                                               <ul class=\"dropdown-menu\">\r\n                                                    <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=pdf&report_id=naturepdf\" > Exporter en pdf</a></li>\r\n                                                 <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=xls&report_id=naturexls\" > Exporter en xls</a></li>\r\n                                             </ul>\r\n                                           </div>\r\n                                          </th>\r\n                                       </tr>\r\n                                   </thead>\r\n                                    <tbody>\r\n                                     <#list rows as row>\r\n                                     <tr>\r\n                                            <td>${row.cols[0]}</td>\r\n                                         <td colspan=\"2\">${row.cols[1]}</td>\r\n                                       </tr>\r\n                                       \r\n                                        </#list>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                          <div class=\"col-xs-12 col-sm-4\">\r\n                              <div id=\"canvas-holder\">\r\n                                  <div id=\"canvas\" ></div>\r\n                              </div>\r\n                          </div>\r\n                          <div class=\"col-xs-12 col-sm-2\">\r\n                              <div class=\"btn-group-vertical\">\r\n                                  <a href=\'javascript:doughnut( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Doughnut</a>\r\n                                   <a href=\'javascript:pie( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Pie </a>\r\n                                    <a href=\'javascript:bar( )\' class=\"btn btn-default\"> <i class=\"fa fa-bar-chart\" ></i> Bar</a>\r\n                             </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n  \r\n        </div>\r\n  </div>\r\n  </div>\r\n<script src=\"js/Chart.min.js\"></script> \r\n<#assign colors = [\"#F7464A\",\"#46BFBD\",\"#FDB45C\", \"#949FB1\",\"#4D5360\" ] />\r\n<#assign highlights = [\"#FF5A5E\",\"#5AD3D1\",\"#FFC870\", \"#A8B3C5\",\"#616774\" ] />\r\n<script>\r\nvar doughnutData = [\r\n<#list rows as row>\r\n    <#if row_index != 0> , </#if>                \r\n    {\r\n   value: ${row.cols[1]},\r\n  color:\"${colors[row_index % 5]}\",\r\n highlight: \"${highlights[row_index % 5]}\",\r\n    label: \"${row.cols[0]}\"\r\n    }\r\n</#list>\r\n];\r\nvar barChartData = {\r\n        labels : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[0]}\"</#list> ],\r\n       datasets : [\r\n            {\r\n               fillColor : \"rgba(100,100,220,0.8)\",\r\n              strokeColor : \"rgba(100,100,220,0.9)\",\r\n                highlightFill: \"rgba(100,100,220,0.9)\",\r\n               highlightStroke: \"rgba(100,100,220,1)\",\r\n               data : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[1]}\"</#list>]\r\n           }       ]\r\n\r\n};\r\n\r\nwindow.onload = function(){\r\n    doughnut();\r\n};\r\n\r\nfunction doughnut( ) {\r\n        $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n  var ctx2 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.myDoughnut = new Chart(ctx2).Doughnut(doughnutData, {responsive : true});\r\n         \r\n};\r\n\r\nfunction pie( ) {\r\n         $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n        document.getElementById(\"chart-area\").getContext(\"2d\").clearRect(0, 0, 400, 400);\r\n var ctx1 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.Pie = new Chart(ctx1).Pie(doughnutData, {responsive : true});\r\n        \r\n};\r\nfunction bar( ) {\r\n                $( \"#chart-area\" ).remove(  );\r\n                $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n     var ctx3 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n      window.myBar = new Chart(ctx3).Bar(barChartData, {\r\n          responsive : true, animationSteps: 50\r\n            });\r\n};\r\n</script>','select tp.label , count(distinct t.id_ticket) as nombre\r\nfrom ticketing_ticket t\r\nJOIN ticketing_ticket_category c ON c.id_ticket_category= t.id_ticket_category \r\nJOIN ticketing_ticket_domain d ON d.id_ticket_domain= c.id_ticket_domain \r\nJOIN ticketing_ticket_type tp ON tp.id_ticket_type= d.id_ticket_type group by tp.label;','portal','Nombre de sollicitations par nature',0,'none'),(17,9,'<div class=\"gru-wrapper\">\r\n    <div id=\"customer-panel\" class=\"row bg-gru-light\">\r\n      <div class=\"col-xs-12 col-sm-offset-1 col-sm-11\">\r\n       <h2>Statistiques</h2>\r\n       <h3>Nombre de sollicitations par canal</h3>\r\n       </div>\r\n  </div>\r\n  <div id=\"stats-panel\" class=\"row bg-gru-light\">\r\n     <div class=\"col-xs-12 col-sm-12\">\r\n         <div class=\"nav-tabs-custom\" style=\"margin-bottom:0;\">\r\n              <ul class=\"nav nav-tabs\"  style=\"padding: 15px 15px 0 15px\">\r\n                    <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=delaimoyendetraitementtotal\"  aria-controls=\"tab-active\" role=\"tab\">\r\n                       Délai moyen de traitement<br> total de la sollicitation\r\n                        </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombresollicitationsparnature\" aria-controls=\"group\" role=\"tab\">\r\n                       Nombre de sollicitations par nature\r\n                     </a>\r\n                    </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationsparstatut\" aria-controls=\"domain\" role=\"tab\" >\r\n                       Nombre de sollicitations par statut \r\n                        </a>\r\n                    </li>\r\n                   <li class=\"dropdown\">\r\n                     <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\" aria-expanded=\"false\">\r\n                       Nombre de sollicitations <br> par groupe d\'assignation <span class=\"caret\"></span>\r\n                       </a>\r\n                        <ul class=\"dropdown-menu\">\r\n                            <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&amp;sqlpage=nombredesollicitationspargroupedassignationentity\">Groupe Assignation Entité</a>\r\n                            </li>\r\n                           <li role=\"presentation\">\r\n                              <a role=\"menuitem\" tabindex=\"-1\" href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=nombredesollicitationspargroupeassignation\">Groupe Assignation Support Entité</a>\r\n                           </li>\r\n                       </ul>\r\n                   </li>\r\n                   <li role=\"presentation\">\r\n                      <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=tauxdescalade\" aria-controls=\"domain\" role=\"tab\">\r\n                        Taux d\'escalade\r\n                      </a>\r\n                    </li>\r\n<li role=\"presentation\" class=\"active\">\r\n                    <a href=\"jsp/admin/plugins/sqlpage/ManageSQLPages.jsp?view=showSQLPage&sqlpage=canal\" aria-controls=\"domain\" role=\"tab\">\r\n                        Demandes par canal\r\n                    </a>\r\n                    </li>\r\n               </ul>\r\n               <div class=\"tab-content\">\r\n                 <div role=\"tabpanel\" class=\"tab-pane active\" id=\"tab-active\" >\r\n                        <div class=\"row\">\r\n                         <div class=\"col-xs-12 col-sm-6\">\r\n                              <table class=\"table table-striped\">\r\n                                   <thead>\r\n                                     <tr>\r\n                                            <th>Action</th>\r\n                                         <th>Canal</th>\r\n                                          <th> \r\n                                           <div class=\"btn-group\">\r\n                                               <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"fa fa-save\" ></i> Exporter\r\n                                                   <span class=\"fa fa-caret-down\"></span>\r\n                                                </button>\r\n                                               <ul class=\"dropdown-menu\">\r\n                                                    <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=pdf&report_id=canalpdf\" > Exporter en pdf</a></li>\r\n                                                  <li><a href=\"jsp/site/plugins/jasper/DownloadFile.jsp?report_type=xls&report_id=canalxls\" > Exporter en xls</a></li>\r\n                                              </ul>\r\n                                           </div>\r\n                                          </th>\r\n                                       </tr>\r\n                                   </thead>\r\n                                    <tbody>\r\n                                     <#list rows as row>\r\n                                     <tr>\r\n                                            <td>${row.cols[0]}</td>\r\n                                         <td>${row.cols[1]}</td>\r\n<td>${row.cols[2]}</td>\r\n                                      </tr>\r\n                                       \r\n                                        </#list>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                          <div class=\"col-xs-12 col-sm-4\">\r\n                              <div id=\"canvas-holder\">\r\n                                  <div id=\"canvas\" ></div>\r\n                              </div>\r\n                          </div>\r\n                          <div class=\"col-xs-12 col-sm-2\">\r\n                              <div class=\"btn-group-vertical\">\r\n                                  <a href=\'javascript:doughnut( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Doughnut</a>\r\n                                   <a href=\'javascript:pie( )\' class=\"btn btn-default\"> <i class=\"icon-adjust\" ></i> Pie </a>\r\n                                    <a href=\'javascript:bar( )\' class=\"btn btn-default\"> <i class=\"fa fa-bar-chart\" ></i> Bar</a>\r\n                             </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n  \r\n        </div>\r\n  </div>\r\n  </div>\r\n<script src=\"js/Chart.min.js\"></script> \r\n<#assign colors = [\"#F7464A\",\"#46BFBD\",\"#FDB45C\", \"#949FB1\",\"#4D5360\" ] />\r\n<#assign highlights = [\"#FF5A5E\",\"#5AD3D1\",\"#FFC870\", \"#A8B3C5\",\"#616774\" ] />\r\n<script>\r\nvar doughnutData = [\r\n<#list rows as row>\r\n    <#if row_index != 0> , </#if>                \r\n    {\r\n   value: ${row.cols[2]},\r\n  color:\"${colors[row_index % 5]}\",\r\n highlight: \"${highlights[row_index % 5]}\",\r\n    label: \"${row.cols[1]}\"\r\n    }\r\n</#list>\r\n];\r\nvar barChartData = {\r\n        labels : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[1]}\"</#list> ],\r\n       datasets : [\r\n            {\r\n               fillColor : \"rgba(100,100,220,0.8)\",\r\n              strokeColor : \"rgba(100,100,220,0.9)\",\r\n                highlightFill: \"rgba(100,100,220,0.9)\",\r\n               highlightStroke: \"rgba(100,100,220,1)\",\r\n               data : [<#list rows as row><#if row_index !=0>,</#if> \"${row.cols[2]}\"</#list>]\r\n           }       ]\r\n\r\n};\r\n\r\nwindow.onload = function(){\r\n    doughnut();\r\n};\r\n\r\nfunction doughnut( ) {\r\n        $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n  var ctx2 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.myDoughnut = new Chart(ctx2).Doughnut(doughnutData, {responsive : true});\r\n         \r\n};\r\n\r\nfunction pie( ) {\r\n         $( \"#chart-area\" ).remove(  );\r\n         $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n        document.getElementById(\"chart-area\").getContext(\"2d\").clearRect(0, 0, 400, 400);\r\n var ctx1 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n  window.Pie = new Chart(ctx1).Pie(doughnutData, {responsive : true});\r\n        \r\n};\r\nfunction bar( ) {\r\n                $( \"#chart-area\" ).remove(  );\r\n                $( \"#canvas\" ).append(\" <canvas id=\'chart-area\' height=\'400\' width=\'400\'></canvas>\" );\r\n     var ctx3 = document.getElementById(\"chart-area\").getContext(\"2d\");\r\n      window.myBar = new Chart(ctx3).Bar(barChartData, {\r\n          responsive : true, animationSteps: 50\r\n            });\r\n};\r\n</script>','SELECT wa.name, ticketing_channel.label, COUNT(wrht.id_channel) AS count\r\nFROM workflow_resource_history_ticketing wrht\r\nJOIN ticketing_channel ON wrht.id_channel=ticketing_channel.id_channel\r\nJOIN workflow_resource_history wrh ON wrht.id_history=wrh.id_history\r\nJOIN workflow_action wa ON wa.id_action = wrh.id_action\r\nWHERE wrh.resource_type = \'ticket\'\r\nGROUP BY name, label\r\n;','portal','Nombre de sollicitations par canal',0,'none');
/*!40000 ALTER TABLE `sqlpage_fragment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `sqlpage_page`
--

DROP TABLE IF EXISTS `sqlpage_page`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sqlpage_page` (
  `id_sqlpage` int(6) NOT NULL,
  `param_name` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `description` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `workgroup` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id_sqlpage`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sqlpage_page`
--

LOCK TABLES `sqlpage_page` WRITE;
/*!40000 ALTER TABLE `sqlpage_page` DISABLE KEYS */;
INSERT INTO `sqlpage_page` VALUES (1,'delaimoyendetraitementtotal','Délai moyen de traitement des sollicitations','Délai moyen de traitement des sollicitaions','all'),(2,'nombresollicitationsparnature','Nombre de sollicitations par nature','Nombre de sollicitations par nature','all'),(3,'nombredesollicitationsparstatut','Nombre de sollicitations par statut','Nombre de sollicitations par statut','all'),(4,'nombredesollicitationspargroupeassignation','Nombre de sollicitations par groupe d’assignation (Entité Support)','Nombre de sollicitations par groupe d’assignation','all'),(5,'testdemo','test demo','test demo','all'),(6,'tauxdescalade','Taux d’escalade','Taux d’escalade = Nombre de sollicitations escaladées / nombre total de sollicitations','all'),(8,'nombredesollicitationspargroupedassignationentity',' Nombre de sollicitations par groupe d’assignation (Entité)',' Nombre de sollicitations par groupe d’assignation (Entité)','all'),(9,'canal','Nombre de sollicitations par canal','Nombre de sollicitations par canal','all');
/*!40000 ALTER TABLE `sqlpage_page` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2016-03-17 11:27:42
